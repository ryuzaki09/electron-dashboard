import axios from 'axios'

import {config} from '../config'

interface ICoords {
  lon: number
  lat: number
}

export const openroute = {
  getDirections: async (from: ICoords, to: ICoords) => {
    const result = await axios.get(
      `https://api.openrouteservice.org/v2/directions/driving-car?api_key=${
        config.openrouteApiKey
      }&start=${from.lon},${from.lat}&end=${to.lon},${to.lat}`
    )

    const routeData = result.data
    const summary = routeData.features[0].properties.summary
    const {distance, duration} = summary
    return {
      duration: duration / 60, // seconds to minutes
      distance: distance / 1609.34 //metres to miles
    }
  }
}

const data = {
  type: 'FeatureCollection',
  bbox: [0.01002, 51.593876, 0.358482, 51.678192],
  features: [
    {
      bbox: [0.01002, 51.593876, 0.358482, 51.678192],
      type: 'Feature',
      properties: {
        segments: [
          {
            distance: 37656.2,
            duration: 1828,
            steps: [
              {
                distance: 231.1,
                duration: 41.6,
                type: 11,
                instruction: 'Head west on Byron Road',
                name: 'Byron Road',
                way_points: [0, 9]
              },
              {
                distance: 50.4,
                duration: 9.1,
                type: 5,
                instruction: 'Turn slight right onto Quennell Way',
                name: 'Quennell Way',
                way_points: [9, 11]
              },
              {
                distance: 186.6,
                duration: 33.6,
                type: 0,
                instruction: 'Turn left onto Hutton Drive',
                name: 'Hutton Drive',
                way_points: [11, 16]
              },
              {
                distance: 119.9,
                duration: 12.3,
                type: 1,
                instruction: 'Turn right onto Hanging Hill Lane',
                name: 'Hanging Hill Lane',
                way_points: [16, 21]
              },
              {
                distance: 578.1,
                duration: 52,
                type: 1,
                instruction: 'Turn right onto Rayleigh Road, A129',
                name: 'Rayleigh Road, A129',
                way_points: [21, 31]
              },
              {
                distance: 2211.5,
                duration: 170.8,
                type: 0,
                instruction: 'Turn left onto Wash Road',
                name: 'Wash Road',
                way_points: [31, 92]
              },
              {
                distance: 188,
                duration: 23.1,
                type: 7,
                instruction:
                  'Enter the roundabout and take the 2nd exit onto Roman Road, B1002',
                name: 'Roman Road, B1002',
                exit_number: 2,
                way_points: [92, 105]
              },
              {
                distance: 6975.8,
                duration: 252.1,
                type: 7,
                instruction:
                  'Enter the roundabout and take the 3rd exit onto Brentwood Bypass, A12',
                name: 'Brentwood Bypass, A12',
                exit_number: 3,
                way_points: [105, 167]
              },
              {
                distance: 311.7,
                duration: 11.2,
                type: 12,
                instruction: 'Keep left onto A12',
                name: 'A12',
                way_points: [167, 175]
              },
              {
                distance: 11736.9,
                duration: 424.1,
                type: 7,
                instruction: 'Enter the roundabout and take the 2nd exit',
                name: '-',
                exit_number: 2,
                way_points: [175, 281]
              },
              {
                distance: 756.9,
                duration: 27.2,
                type: 12,
                instruction: 'Keep left',
                name: '-',
                way_points: [281, 296]
              },
              {
                distance: 11197.9,
                duration: 474.1,
                type: 12,
                instruction: 'Keep left',
                name: '-',
                way_points: [296, 382]
              },
              {
                distance: 162.7,
                duration: 9.8,
                type: 13,
                instruction: 'Keep right onto M11',
                name: 'M11',
                way_points: [382, 384]
              },
              {
                distance: 1796.6,
                duration: 124,
                type: 13,
                instruction: 'Keep right onto M11',
                name: 'M11',
                way_points: [384, 415]
              },
              {
                distance: 478.2,
                duration: 43,
                type: 12,
                instruction: 'Keep left onto North Circular Road, A406',
                name: 'North Circular Road, A406',
                way_points: [415, 425]
              },
              {
                distance: 605.6,
                duration: 103.7,
                type: 7,
                instruction:
                  'Enter the roundabout and take the 3rd exit onto Woodford New Road, A104',
                name: 'Woodford New Road, A104',
                exit_number: 3,
                way_points: [425, 446]
              },
              {
                distance: 68.5,
                duration: 16.4,
                type: 1,
                instruction: 'Turn right onto Chelmsford Road',
                name: 'Chelmsford Road',
                way_points: [446, 449]
              },
              {
                distance: 0,
                duration: 0,
                type: 10,
                instruction: 'Arrive at Chelmsford Road, on the right',
                name: '-',
                way_points: [449, 449]
              }
            ]
          }
        ],
        way_points: [0, 449],
        summary: {distance: 37656.2, duration: 1828}
      },
      geometry: {
        coordinates: [
          [0.34935, 51.6284],
          [0.348069, 51.628552],
          [0.34738, 51.628709],
          [0.347233, 51.628743],
          [0.34714, 51.628783],
          [0.347048, 51.628859],
          [0.346991, 51.628947],
          [0.347, 51.629048],
          [0.34705, 51.629184],
          [0.347147, 51.62939],
          [0.347292, 51.629456],
          [0.347676, 51.629701],
          [0.347215, 51.629987],
          [0.346905, 51.630101],
          [0.346058, 51.630282],
          [0.345938, 51.630309],
          [0.345306, 51.630443],
          [0.345465, 51.630749],
          [0.345506, 51.630949],
          [0.345488, 51.631098],
          [0.345426, 51.631256],
          [0.345258, 51.631476],
          [0.345365, 51.631528],
          [0.346469, 51.631923],
          [0.347051, 51.632132],
          [0.347708, 51.632367],
          [0.34871, 51.632693],
          [0.349252, 51.632828],
          [0.349936, 51.632963],
          [0.350952, 51.63315],
          [0.351567, 51.633259],
          [0.352918, 51.633493],
          [0.352919, 51.633647],
          [0.352955, 51.633761],
          [0.353017, 51.633833],
          [0.353795, 51.634386],
          [0.354673, 51.635022],
          [0.355459, 51.635594],
          [0.355693, 51.6358],
          [0.355779, 51.635874],
          [0.356189, 51.63624],
          [0.356265, 51.636307],
          [0.356972, 51.63696],
          [0.357401, 51.63728],
          [0.357745, 51.637707],
          [0.35787, 51.637899],
          [0.358042, 51.638314],
          [0.358152, 51.638584],
          [0.35826, 51.639029],
          [0.358331, 51.63941],
          [0.358405, 51.639895],
          [0.358416, 51.639996],
          [0.358413, 51.640999],
          [0.358433, 51.641637],
          [0.358439, 51.641747],
          [0.358482, 51.642175],
          [0.358478, 51.642301],
          [0.358444, 51.642404],
          [0.358291, 51.642624],
          [0.358134, 51.642747],
          [0.357871, 51.64287],
          [0.357486, 51.642962],
          [0.357227, 51.642988],
          [0.35661, 51.642992],
          [0.356007, 51.643016],
          [0.355541, 51.643084],
          [0.355013, 51.643213],
          [0.354629, 51.64336],
          [0.354262, 51.643556],
          [0.354029, 51.643715],
          [0.353292, 51.6444],
          [0.353018, 51.644619],
          [0.352706, 51.644814],
          [0.352353, 51.644999],
          [0.350967, 51.645604],
          [0.350695, 51.645755],
          [0.350337, 51.645997],
          [0.350033, 51.646213],
          [0.349783, 51.646391],
          [0.349263, 51.646807],
          [0.349136, 51.646951],
          [0.349038, 51.647055],
          [0.348864, 51.647202],
          [0.34873, 51.647296],
          [0.3484, 51.647447],
          [0.348205, 51.647512],
          [0.347972, 51.647562],
          [0.347645, 51.647597],
          [0.347316, 51.647598],
          [0.346867, 51.647551],
          [0.346505, 51.647508],
          [0.346161, 51.647447],
          [0.346032, 51.6474],
          [0.345987, 51.647354],
          [0.345918, 51.647318],
          [0.345825, 51.647296],
          [0.345737, 51.647295],
          [0.345612, 51.647322],
          [0.345307, 51.647297],
          [0.345055, 51.647254],
          [0.344871, 51.647181],
          [0.344632, 51.647082],
          [0.344299, 51.646894],
          [0.344209, 51.646631],
          [0.344215, 51.646582],
          [0.344283, 51.646472],
          [0.34435, 51.646445],
          [0.344526, 51.646299],
          [0.344575, 51.646201],
          [0.344603, 51.645904],
          [0.344535, 51.645758],
          [0.344431, 51.64567],
          [0.34433, 51.645611],
          [0.344248, 51.645584],
          [0.344059, 51.645555],
          [0.343776, 51.645568],
          [0.3437, 51.645593],
          [0.343195, 51.645574],
          [0.342246, 51.645468],
          [0.341807, 51.645403],
          [0.341309, 51.645314],
          [0.340932, 51.645228],
          [0.340162, 51.645017],
          [0.339775, 51.644894],
          [0.339377, 51.644745],
          [0.336881, 51.643679],
          [0.335999, 51.643364],
          [0.335274, 51.643085],
          [0.334498, 51.642834],
          [0.333734, 51.642607],
          [0.331851, 51.642146],
          [0.32898, 51.641457],
          [0.324677, 51.640443],
          [0.319508, 51.63917],
          [0.319084, 51.639049],
          [0.313245, 51.637194],
          [0.307528, 51.635341],
          [0.303366, 51.634017],
          [0.29776, 51.632224],
          [0.296818, 51.63192],
          [0.293023, 51.6307],
          [0.292204, 51.630412],
          [0.291455, 51.630133],
          [0.291147, 51.629999],
          [0.290498, 51.629663],
          [0.290064, 51.629419],
          [0.28968, 51.629174],
          [0.289321, 51.628916],
          [0.288768, 51.628425],
          [0.288534, 51.62819],
          [0.288198, 51.627778],
          [0.287763, 51.627151],
          [0.287304, 51.626314],
          [0.285949, 51.623729],
          [0.285277, 51.622479],
          [0.28512, 51.622231],
          [0.28482, 51.621787],
          [0.284406, 51.621316],
          [0.284128, 51.62104],
          [0.283667, 51.620652],
          [0.282944, 51.620128],
          [0.280499, 51.618598],
          [0.271136, 51.613218],
          [0.269559, 51.612347],
          [0.268446, 51.611754],
          [0.267908, 51.611512],
          [0.267133, 51.611204],
          [0.266462, 51.61094],
          [0.266313, 51.610787],
          [0.265733, 51.610474],
          [0.265424, 51.610279],
          [0.264838, 51.609855],
          [0.26439, 51.609522],
          [0.263926, 51.609101],
          [0.263851, 51.608966],
          [0.263819, 51.60874],
          [0.263602, 51.608933],
          [0.263444, 51.609034],
          [0.263288, 51.609104],
          [0.263084, 51.609165],
          [0.262642, 51.609281],
          [0.262388, 51.609331],
          [0.26231, 51.609338],
          [0.262027, 51.609338],
          [0.261875, 51.609315],
          [0.261746, 51.609282],
          [0.261557, 51.609194],
          [0.261383, 51.609053],
          [0.261343, 51.608993],
          [0.261292, 51.608864],
          [0.261265, 51.608691],
          [0.261061, 51.608951],
          [0.260911, 51.609106],
          [0.260059, 51.609937],
          [0.259489, 51.610383],
          [0.258813, 51.610758],
          [0.2583, 51.61109],
          [0.257918, 51.611462],
          [0.257628, 51.611856],
          [0.25714, 51.612895],
          [0.256837, 51.613372],
          [0.256615, 51.613648],
          [0.256139, 51.614175],
          [0.255177, 51.615083],
          [0.254902, 51.615401],
          [0.254254, 51.615906],
          [0.253246, 51.616613],
          [0.252145, 51.61729],
          [0.250954, 51.617935],
          [0.250141, 51.61833],
          [0.248886, 51.618878],
          [0.245366, 51.620237],
          [0.244062, 51.620756],
          [0.242971, 51.621211],
          [0.241065, 51.622034],
          [0.238979, 51.622996],
          [0.236452, 51.624242],
          [0.233763, 51.625631],
          [0.230435, 51.627434],
          [0.227479, 51.62912],
          [0.225194, 51.630519],
          [0.222921, 51.632014],
          [0.221072, 51.633322],
          [0.219189, 51.634726],
          [0.217544, 51.636026],
          [0.215819, 51.637468],
          [0.214526, 51.638612],
          [0.211755, 51.641152],
          [0.209976, 51.642669],
          [0.208761, 51.643636],
          [0.207756, 51.644398],
          [0.206485, 51.645317],
          [0.204753, 51.646501],
          [0.203343, 51.647395],
          [0.201884, 51.648254],
          [0.200389, 51.649074],
          [0.198844, 51.649859],
          [0.197247, 51.650614],
          [0.195724, 51.651285],
          [0.193523, 51.652185],
          [0.191484, 51.65296],
          [0.19085, 51.653186],
          [0.188715, 51.653917],
          [0.187544, 51.654292],
          [0.185754, 51.654821],
          [0.1843, 51.655211],
          [0.183073, 51.655515],
          [0.178013, 51.656687],
          [0.176533, 51.657087],
          [0.175717, 51.657349],
          [0.175016, 51.657584],
          [0.174134, 51.657896],
          [0.173666, 51.65808],
          [0.172359, 51.658637],
          [0.171511, 51.659044],
          [0.170785, 51.659421],
          [0.169622, 51.660086],
          [0.168518, 51.660808],
          [0.167817, 51.661316],
          [0.16708, 51.661888],
          [0.165129, 51.663468],
          [0.164466, 51.663974],
          [0.163771, 51.664474],
          [0.163048, 51.664959],
          [0.162296, 51.665424],
          [0.161229, 51.666033],
          [0.160424, 51.666453],
          [0.159376, 51.666947],
          [0.158532, 51.667308],
          [0.157644, 51.667654],
          [0.156733, 51.667975],
          [0.155433, 51.668388],
          [0.151858, 51.66939],
          [0.150897, 51.669682],
          [0.149472, 51.670154],
          [0.147904, 51.670745],
          [0.146558, 51.671282],
          [0.145228, 51.671856],
          [0.144346, 51.672266],
          [0.142355, 51.673265],
          [0.139512, 51.674817],
          [0.138142, 51.67551],
          [0.137838, 51.675574],
          [0.136802, 51.676035],
          [0.135869, 51.676422],
          [0.135089, 51.676719],
          [0.134288, 51.677003],
          [0.133662, 51.677203],
          [0.132118, 51.677661],
          [0.131857, 51.677758],
          [0.131024, 51.677964],
          [0.130193, 51.678118],
          [0.129962, 51.67815],
          [0.129503, 51.67819],
          [0.129138, 51.678192],
          [0.128838, 51.678176],
          [0.128279, 51.678105],
          [0.127945, 51.67801],
          [0.126914, 51.677848],
          [0.12633, 51.6778],
          [0.125127, 51.677776],
          [0.124585, 51.677721],
          [0.124291, 51.677658],
          [0.123995, 51.677566],
          [0.123488, 51.677346],
          [0.123248, 51.677186],
          [0.122925, 51.676898],
          [0.121959, 51.675755],
          [0.120072, 51.673108],
          [0.119541, 51.672251],
          [0.118649, 51.670917],
          [0.117859, 51.669768],
          [0.117087, 51.668703],
          [0.115902, 51.667181],
          [0.11396, 51.664806],
          [0.113783, 51.664597],
          [0.112561, 51.66329],
          [0.110865, 51.661484],
          [0.108908, 51.65945],
          [0.106384, 51.656921],
          [0.103938, 51.654535],
          [0.102015, 51.652698],
          [0.099518, 51.650397],
          [0.098162, 51.649237],
          [0.096685, 51.648102],
          [0.095707, 51.647394],
          [0.094548, 51.646574],
          [0.093278, 51.645753],
          [0.092025, 51.644976],
          [0.087313, 51.642265],
          [0.086266, 51.641631],
          [0.085939, 51.641434],
          [0.084803, 51.640754],
          [0.083901, 51.640195],
          [0.082699, 51.639431],
          [0.080036, 51.637727],
          [0.075468, 51.634589],
          [0.072685, 51.632587],
          [0.068816, 51.629624],
          [0.067542, 51.628555],
          [0.066914, 51.627941],
          [0.066468, 51.62746],
          [0.065873, 51.62673],
          [0.065446, 51.62613],
          [0.065062, 51.625491],
          [0.064678, 51.624797],
          [0.064329, 51.623968],
          [0.064136, 51.623343],
          [0.063705, 51.620923],
          [0.063492, 51.620159],
          [0.063178, 51.619282],
          [0.062614, 51.618273],
          [0.06199, 51.617445],
          [0.061196, 51.616599],
          [0.060338, 51.615906],
          [0.059349, 51.6152],
          [0.058165, 51.614559],
          [0.056937, 51.613984],
          [0.056611, 51.613849],
          [0.05536, 51.613335],
          [0.05129, 51.611681],
          [0.050543, 51.611319],
          [0.049796, 51.610866],
          [0.049341, 51.610503],
          [0.048852, 51.609997],
          [0.04856, 51.609592],
          [0.0483, 51.609034],
          [0.048174, 51.608414],
          [0.048193, 51.607754],
          [0.048483, 51.606937],
          [0.049212, 51.605461],
          [0.04935, 51.604938],
          [0.049401, 51.604474],
          [0.04935, 51.604059],
          [0.049238, 51.603547],
          [0.047993, 51.600841],
          [0.04732, 51.599533],
          [0.047012, 51.599075],
          [0.046793, 51.598824],
          [0.046211, 51.598311],
          [0.045369, 51.597805],
          [0.044262, 51.597203],
          [0.04385, 51.596962],
          [0.042981, 51.596444],
          [0.042208, 51.595914],
          [0.041022, 51.595073],
          [0.040618, 51.594806],
          [0.04026, 51.594598],
          [0.039864, 51.594419],
          [0.039181, 51.594173],
          [0.038782, 51.594078],
          [0.038315, 51.593992],
          [0.03794, 51.59394],
          [0.037497, 51.593909],
          [0.03665, 51.593876],
          [0.035693, 51.593886],
          [0.035217, 51.593932],
          [0.03495, 51.593977],
          [0.034525, 51.594079],
          [0.034162, 51.594215],
          [0.033593, 51.594483],
          [0.033014, 51.594711],
          [0.032123, 51.595006],
          [0.030372, 51.595537],
          [0.028747, 51.595921],
          [0.02735, 51.596171],
          [0.026537, 51.596268],
          [0.025892, 51.596318],
          [0.025119, 51.596337],
          [0.024699, 51.596293],
          [0.024201, 51.596251],
          [0.023556, 51.596167],
          [0.022846, 51.596041],
          [0.02009, 51.595518],
          [0.01901, 51.595354],
          [0.01848, 51.59529],
          [0.017404, 51.595159],
          [0.016812, 51.595109],
          [0.016129, 51.595075],
          [0.014715, 51.595037],
          [0.014204, 51.595045],
          [0.013211, 51.595096],
          [0.012245, 51.595201],
          [0.011982, 51.595211],
          [0.011845, 51.595198],
          [0.011633, 51.595132],
          [0.011213, 51.594967],
          [0.010884, 51.594926],
          [0.010751, 51.594925],
          [0.010627, 51.594949],
          [0.010455, 51.595024],
          [0.010245, 51.59524],
          [0.010094, 51.595484],
          [0.01002, 51.595715],
          [0.01002, 51.595793],
          [0.010053, 51.595869],
          [0.010117, 51.595936],
          [0.010207, 51.595991],
          [0.010567, 51.59618],
          [0.010893, 51.596328],
          [0.011246, 51.596531],
          [0.01139, 51.596669],
          [0.0115, 51.596796],
          [0.011616, 51.597049],
          [0.011643, 51.597098],
          [0.012285, 51.598377],
          [0.012687, 51.599103],
          [0.012805, 51.599074],
          [0.013444, 51.599043],
          [0.013666, 51.599034]
        ],
        type: 'LineString'
      }
    }
  ],
  metadata: {
    attribution: 'openrouteservice.org | OpenStreetMap contributors',
    service: 'routing',
    timestamp: 1743286932743,
    query: {
      coordinates: [[0.34935, 51.6284], [0.01366, 51.59898]],
      profile: 'driving-car',
      profileName: 'driving-car',
      format: 'json'
    },
    engine: {
      version: '9.1.1',
      build_date: '2025-03-14T11:07:03Z',
      graph_date: '2025-03-24T15:03:28Z'
    }
  }
}
